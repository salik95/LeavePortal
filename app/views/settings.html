{% extends 'base.html' %}
{% block title %}Application Settings{% endblock %}

{% block body %}
<main id="application-settings">
  <div class="row">
    <div class="col s12 m8 center">

      <div class="card">

        <div class="card-content">
          <p class="heading text-center">
            <i class="material-icons">settings_applications</i><span>System Settings</span>
          </p>

          <form method="POST" action="#">

            {% include 'components/loading.html' %}

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="notice solid {{category}}">
              <span>{{message}}</span>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <div class="row"></div>
            <div class="input-field col s12 m6">
              <label class="active" for="general_leaves_limit">General Leaves Limit</label>
              <input class="settings" type="text" value="{{ data.general_leaves_limit }}" placeholder="{{ data.general_leaves_limit }}"
              name="general_leaves_limit" id="general_leaves_limit">
            </div>

            <div class="input-field col s12 m6">
              <label class="active" for="medical_leaves_limit">Medical Leaves Limit</label>
              <input value="{{ data.medical_leaves_limit }}" type="text" placeholder="{{ data.medical_leaves_limit }}" name="medical_leaves_limit"
              id="medical_leaves_limit">

            </div>

            <div class="input-field col s12 m6">
              <label class="active" for="probation_leaves_limit">Probation Leaves Limit</label>
              <input value="{{ data.probation_leaves_limit }}" type="text" placeholder="{{ data.probation_leaves_limit }}" name="probation_leaves_limit"
              id="probation_leaves_limit">
            </div>

            <div class="input-field col s12 m6">
              <label class="active" for="fiscal_year_starting">Fiscal Year Starting</label>
              <input value="{{ data.fiscal_year_starting|strftime }}" class="datepicker" type="text" placeholder="{{ data.fiscal_year_starting|strftime }}"
              name="fiscal_year_starting" id="fiscal_year_starting">
            </div>

            <div class="input-field col s12 m6">
              <label class="active" for="probation_period">Probation Period</label>
              <input value="{{ data.probation_period }}" type="text" placeholder="{{ data.probation_period }}" name="probation_period" id="probation_period">
            </div>

            <div class="input-field col s12 m6">
              <label class="active" for="company_name">Company Name</label>
              <input value="{{ data.company_name }}" type="text" placeholder="{{ data.company_name }}" name="company_name" id="company_name">
            </div>

            <div class="input-field col s12 m6">
              <label class="active" for="director_email">Director's Email</label>
              <input value="{{ data.director_email }}" type="text" placeholder="{{ data.director_email }}" name="director_email" id="director_email">
            </div>

            <div class="clr"></div>
            
            <div class="input-field text-center">
              <button type="submit" name="submit" class="btn center flat">
                <i class="material-icons">check</i> UPDATE
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col s12 m8 center">

      <div class="card">

        <div class="card-content">
          <p class="heading text-center">
            <i class="material-icons">settings_applications</i><span>Gazetted Holidays</span>
          </p>

          <form id="form-holidays" method="POST" action="#">

            {% include 'components/loading.html' %}

            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            {% for category, message in messages %}
            <div class="notice solid {{category}}">
              <span>{{message}}</span>
            </div>
            {% endfor %}
            {% endif %}
            {% endwith %}

            {% for item in data[gazetted_holidays]%}
            <div class="row">
              <div class="input-field col s12 m1">
                <select name="gazetted_holidays[][day]" id="days">
                  {% for i in range(1,31) %}
                    {% if i == item.date %}
                      <option value="{{ i }}" selected> {{ i }}</option>
                    {% else %}
                      <option value="{{ i }}"> {{ i }}</option>
                    {% endif %}  
                  
                  {% endfor %}
                </select>
                <label class="active" for="">Day</label>
              </div>

              <div class="input-field col s12 m1">
                <select name="gazetted_holidays[][month]" id="month">
                  {% for i in months %}
                    {% if i == item.month %}
                      <option value="{{i}}" selected>{{i}}</option>
                    {% else %}
                      <option value="{{i}}">{{i}}</option>
                    {% endif %}
                  {% endfor %}
                </select>
                <label class="active" for="">Month</label>
              </div>

              <div class="input-field col s12 m4">
                <label class="active" for="name">Name</label>
                <input id="name" type="text" name="gazetted_holidays[][name]">
              </div>

              <div class="input-field col s12 m4">
                <label class="active" for="religion">Religion</label>
                <input id="religion" type="text" name="gazetted_holidays[][religion]">                
              </div>

              <div class="col s6 m2">
                <a id="gazetted_edit_btn" class="waves-effect waves-light btn"><i class="material-icons">edit</i></a>
              </div>
            </div>
            {% endfor %}
            

            <div class="clr"></div>
            
            <div class="input-field text-center">
              <button type="submit" name="submit" class="btn center flat">
                <i class="material-icons">check</i> UPDATE
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
</main>

{% endblock %}
