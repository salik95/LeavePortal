{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block body %}

<main id="dashboard">

  <div class="workspace-select">
    <ul class="tabs">
      <li class="tab"><a href="#wspersonal">Personal</a></li>
      <li class="tab"><a href="#wsmanagement">Management</a></li>
    </ul>
  </div>
  
  <div id="wspersonal">

    <div class="row">

      <div class="col s6">
        <div class="card fixed center counter">
          <p class="card-title">General Leaves</p>
          <div class="card-content">
            <div class="row">
              <div class="col s6">
                <p>Availed</p>
                <h1>{{user.general_leaves_availed}}</h1>
              </div>
              <div class="col s6">
                <p>Remaining</p>
                <h1>{{user.general_leaves_remaining}}</h1>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col s6">
        <div class="card fixed center counter">
          <p class="card-title">Medical Leaves</p>
          <div class="card-content">
            <div class="row">
              <div class="col s12 m6 l6">
                <p>Availed</p>
                <h1>{{user.medical_leaves_availed}}</h1>
              </div>
              <div class="col s12 m6 l6">
                <p>Remaining</p>
                <h1>{{user.medical_leaves_remaining}}</h1>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">

      <div class="col s12 m12 l12">
        <div class="card leaves">
          <p class="card-title">Leaves History</p>
          <div class="card-content">

            <div class="items scrollable">
              {% for item in data.history %}

              <div class="item">
                <div class="duration">
                  <p class="month">{{item.from_date.strftime("%b")}}</p>
                  <p class="date">{{item.from_date.strftime("%d")}}</p>
                  <br>
                  <p class="date">{{item.to_date.strftime("%d")}}</p>
                  <p class="month">{{item.to_date.strftime("%b")}}</p>
                </div>
                <div class="details">
                  <p class="type">{{item.leave_type}}</p>
                  <p>{{item.purpose}}</p>
                </div>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="wsmanagement">
    <div class="notification">
      <h5 class="center">Leave Requests</h5>
      <br>
      <div class="row">
        <div class="col s12">

          <ul class="" data-collapsible="accordion">

    <li class="collection-item">
    test item
    </li>

            {% for item in data.pending_requests %}
            
            <li class="collection-item">
              <div class="collapsible-header">
                <p>
                  <span class="name">{{item[0].first_name}} {{item[0].last_name}}</span><br>
                  General Manager
                </p>
              </div>
              <div class="collapsible-body">
                <div class="first-row">
                  <p><span class="bold">EMP-ID</span>&emsp; {{item[0].id}}</p>
                  <p><span class="bold">Dates</span>&emsp; {{item[1].from_date}} to {{item[1].to_date}}</p>
                  <p><span class="bold">Type</span>&emsp; {{item[1].leave_type}}</p>
                </div>

                <p class="center">{{item[1].purpose}}</p>

                <div>
                  <label for="pay">Pay (Rs)</label>
                  <input type="number" id="pay">
                </div>

                <div class="row">
                  <div class="col l6">
                    <p class="bold">HR Remarks</p>
                    <p class="message">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae veniam assumenda temporibus corporis, consequuntur officiis molestias, pariatur ad dolorum debitis aperiam earum aliquam molestiae laboriosam reiciendis quos. Fugiat, tempora, quia.</p>
                    <a class="waves-effect waves-light btn">approve</a>
                    <a class="waves-effect waves-light btn">decline</a>
                  </div>
                  <div class="col l6">
                    <p class="bold">Manager Remarks</p>
                    <p class="message">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quae veniam assumenda temporibus corporis, consequuntur officiis molestias, pariatur ad dolorum debitis aperiam earum aliquam molestiae laboriosam reiciendis quos. Fugiat, tempora, quia.</p>
                    <a class="waves-effect waves-light btn">approve</a>
                    <a class="waves-effect waves-light btn">decline</a>
                  </div>
                </div>
              </div>
            </li>
            {% endfor %}
          </ul>
        </div>
      </div>  
    </div>
  </div>


</main>

<div id="addleave" class="lightbox">
  <div class="content">
    <h5 class="center upper">Apply for Leave</h5>
    <br>
    <div class="divider"></div>
    <br>
    {% include 'dashboard/form-leave.html' %}
  </div>
</div>

{% endblock %}